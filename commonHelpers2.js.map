{"version":3,"file":"commonHelpers2.js","sources":["../src/js/markup-product-list.js","../src/js/render-product-list.js","../src/js/aside.js","../src/js/pagination/buttons.js","../src/js/pagination/pagination-handler.js","../src/js/filter.js","../src/js/home.js","../src/js/product-list-click.js","../src/js/modal-markup.js","../src/js/select.js"],"sourcesContent":["import icons from '../img/icons.svg';\n\nexport function markupProductsList(productsObj) {\n  if (productsObj.length) {\n    return productsObj\n      .map(\n        ({\n          category,\n          img,\n          is10PercentOff,\n          name,\n          popularity,\n          price,\n          size,\n          _id,\n        }) => {\n          if (is10PercentOff) {\n            return `<li class=\"products-card-item js-card-item\" data-id=\"${_id}\">\n\n                  <div class=\"prod-list-discount-label\">\n                    <svg class=\"prod-list-discount-label-svg\">\n                        <use href=\"${icons}#icon-discount\"></use>\n                    </svg>\n                  </div>\n\n                <a class=\"products-card-link\" href=\"#\"><img class=\"product-image\" src=\"${img}\" alt=\"${name}\" /></a>\n                <a class=\"products-card-link\" href=\"#\"><h4 class=\"product-name\">${name}</h4></a>\n                <ul class=\"product-description-list\">\n                        <li><p class=\"product-text\">Category:<span class=\"product-text-black\"> ${category}</span>Size:<span class=\"product-text-black\"> ${size}</span></p></li>\n                        <li><p class=\"product-text product-text-popular\">Popularity:<span class=\"product-text-black\"> ${popularity}</span></p></li>\n                </ul>\n                <div class=\"wrap-prise-and-btn\">\n                    <p class=\"price\">$${price}</p>\n                    <button type=\"button\" class=\"btn btn-shopping-cart js-add-btn\">\n                        <svg class=\"icon-shopping-cart\" width=\"18\" height=\"18\">\n                            <use href=\"${icons}#icon-shopping-cart\" class=\"products-desc-basket\"></use>\n\n                            <use\n                              href=\"${icons}#icon-check\"\n                              class=\"products-desc-added\"\n                            ></use>\n                        </svg>\n                        \n                    </button>\n                </div>\n            </li>`;\n          }\n\n          return `<li class=\"products-card-item js-card-item\" data-id=\"${_id}\">\n\n                <a class=\"products-card-link\" href=\"#\"><img class=\"product-image\" src=\"${img}\" alt=\"${name}\" /></a>\n                <a class=\"products-card-link\" href=\"#\"><h4 class=\"product-name\">${name}</h4></a>\n                <ul class=\"product-description-list\">\n                        <li><p class=\"product-text\">Category:<span class=\"product-text-black\"> ${category}</span>Size:<span class=\"product-text-black\"> ${size}</span></p></li>\n                        <li><p class=\"product-text product-text-popular\">Popularity:<span class=\"product-text-black\"> ${popularity}</span></p></li>\n                </ul>\n                <div class=\"wrap-prise-and-btn\">\n                    <p class=\"price\">$${price}</p>\n                    <button type=\"button\" class=\"btn btn-shopping-cart js-add-btn\">\n                        <svg class=\"icon-shopping-cart\" width=\"18\" height=\"18\">\n                            <use href=\"${icons}#icon-shopping-cart\" class=\"products-desc-basket\"></use>\n\n                            <use\n                              href=\"${icons}#icon-check\"\n                              class=\"products-desc-added\"\n                            ></use>\n                        </svg>\n                        \n                    </button>\n                </div>\n            </li>`;\n        }\n      )\n      .join('');\n  }\n\n  return `<div class=\"wrap-noting-found\">\n  <p class=\"title-noting-found\">\n    Nothing was found for the selected\n    <span class=\"acent-noting-found\"> filters...</span>\n  </p>\n  <p class=\"paragraf-noting-found\">\n    Try adjusting your search parameters or browse our range by other criteria\n    to find the perfect product for you.\n  </p>\n</div>`;\n}\n","import { markupProductsList } from './markup-product-list';\n\nexport function renderProductList(elemRef, products) {\n  elemRef.innerHTML = markupProductsList(products);\n}\n","import icons from '../img/icons.svg';\n\n//EXPORT TO HOME.JS STRING --------->  66\n\nfunction renderPopularProd(listenerPopularListRef, dataPopularProduct) {\n  listenerPopularListRef.innerHTML = markupPopular(dataPopularProduct);\n}\n\n// EXPORT TO HOME.JS STRING --------->  79\n\nfunction renderDiscountProd(listenerDiscountListRef, dataDiscountProduct) {\n  listenerDiscountListRef.innerHTML = markupDiscount(dataDiscountProduct);\n}\n\nfunction markupPopular(obj) {\n  return obj\n    .map(item => {\n      const { _id, name, img, category, size, popularity } = item;\n      return `<li class=\"popular-item js-card-item\" data-id=\"${_id}\">\n        <div class=\"popular-img-wrapper\">\n         <a class=\"products-card-link\" href=\"#\"> \n          <img\n            src=\"${img}\"\n            alt=\"${name}\"\n            class=\"popular-img\"\n          />\n          </a>\n        </div>\n        <div class=\"popular-desc-wrapper\">\n          <a class=\"products-card-link\" href=\"#\">\n          <h3 class=\"popular-desc-name\">${name}</h3>\n          </a>\n          <p class=\"popular-desc-text\">\n            Category: <span class=\"popular-desc-span\">${category}</span>\n          </p>\n          <div class=\"popular-desc-inner\">\n            <p class=\"popular-desc-text\">\n              Size: <span class=\"popular-desc-span\">${size}</span>\n            </p>\n            <p class=\"popular-desc-text\">\n              Popularity: <span class=\"popular-desc-span\">${popularity}</span>\n            </p>\n          </div>\n        </div>\n        <button\n          type=\"button\"\n          class=\"popular-btn btn js-add-btn\"\n          aria-label=\"add the product to the basket\"\n        >\n          <svg class=\"popular-desc-svg\">\n            <use\n              href=\"${icons}#icon-shopping-cart\"\n              class=\"popular-desc-basket\"\n            ></use>\n            <use\n              href=\"${icons}#icon-check\"\n              class=\"popular-desc-added\"\n            ></use>\n          </svg>\n        </button>\n      </li>`;\n    })\n    .join('');\n}\n\nfunction markupDiscount(obj) {\n  const newArr = obj.slice(0, 2);\n  return newArr\n    .map(item => {\n      const { _id, name, img, price } = item;\n\n      return `<li class=\"discount-item js-card-item\" data-id=\"${_id}\">\n        <a class=\"products-card-link\" href=\"#\">\n        <div class=\"discount-img-wrapper\">\n          <img\n            src=\"${img}\"\n            alt=\"${name}\"\n            class=\"discount-img\"\n          />   \n        </div>\n        </a>\n        <div class=\"discount-desc-wrapper\">    \n        <a class=\"products-card-link\" href=\"#\">      \n            <p class=\"discount-desc-text text-overflow\">${name}</p> \n            </a> \n          <div class=\"discount-box\">    \n            <p class=\"discount-desc-text\">$${price}</p>\n            <button\n              type=\"button\"\n              class=\"discount-btn btn js-add-btn\"\n              aria-label=\"add the product to the basket\"\n            >\n              <svg class=\"discount-desc-svg\">\n                <use\n                  href=\"${icons}#icon-shopping-cart\"\n                  class=\"discount-desc-basket \"\n                ></use>\n                <use\n                  href=\"${icons}#icon-check\"\n                  class=\"discount-desc-added\"\n                ></use>\n              </svg>\n            </button>\n          </div>\n        </div>\n        <div class=\"discount-box-label\">\n          <svg class=\"discount-label-svg\">\n            <use href=\"${icons}#icon-discount\"></use>\n          </svg>\n        </div>\n      </li>`;\n    })\n    .join('');\n}\n\nexport { renderPopularProd, renderDiscountProd, markupPopular, markupDiscount };\n","import icons from '../../img/icons.svg';\nexport class PaginationButtons {\n  constructor() {}\n  numBtnCreateMarkUp(num) {\n    return `<li class=\"buttons-item\">\n        <button class=\"pagination-btn num-btn\" type=\"button\" data-button-id=\"${num}\">${num}</button>\n      </li>`;\n  }\n  numBtnSetActive(num) {}\n  numBtnSetInactive(num) {}\n  numBtnChangeNum() {}\n\n  intervalBtnCreateMarkUp() {\n    return `<li class=\"buttons-item\">\n        <button class=\"pagination-btn interval-btn\" type=\"button\" data-button-id=\"interval\">...</button>\n      </li>`;\n  }\n  intervalBtnShow() {}\n  intervalBtnHide() {}\n\n  prevBtnCreateMarkUp() {\n    return `<li class=\"buttons-item\">\n        <button class=\"pagination-btn prev-btn\" type=\"button\" data-button-id=\"prev-btn\">\n          <svg class=\"icon-shopping-cart\" width=\"24\" height=\"24\">\n            <use href=\"${icons}#icon-caret-left\" class=\"pagination-arrows\" />\n          </svg>\n        </button>\n      </li>`;\n  }\n  nextBtnCreateMarkUp() {\n    return `<li class=\"buttons-item\">\n        <button class=\"pagination-btn next-btn\" type=\"button\" data-button-id=\"next-btn\">\n          <svg class=\"icon-shopping-cart\" width=\"24\" height=\"24\">\n            <use href=\"${icons}#icon-caret-right\" class=\"pagination-arrows\" />\n          </svg>\n        </button>\n      </li>`;\n  }\n  prevBtnSetActive(num) {}\n  prevBtnSetInactive(num) {}\n  nextBtnSetActive(num) {}\n  nextBtnSetInactive(num) {}\n}\n","import { PaginationButtons } from './buttons';\nimport { Storage } from '../local-storage-api';\nimport { getProducts } from '../home';\n\nconst FIRST_VARIANT = 'variant1';\nconst SECOND_VARIANT = 'variant2';\nconst THIRD_VARIANT = 'variant3';\nconst ACTIVE_BTN = 'active-pagination-btn';\nconst PREV_BTN_ID = 'prev-btn';\nconst NEXT_BTN_ID = 'next-btn';\nconst INTERVAL_BTN_ID = 'interval';\nconst MAX_BUTTONS_COUNT = 5;\nconst PRODUCT_STORAGE = 'product-storage';\nconst FILTER_STORAGE = 'filter-storage';\n\nconst filterStorage = new Storage(FILTER_STORAGE);\nconst productStorage = new Storage(PRODUCT_STORAGE);\nconst pagButtons = new PaginationButtons();\nconst buttonsListRef = document.querySelector('.buttons-list');\n\nbuttonsListRef.addEventListener('click', onPagButtonsClick);\nlet currentPage = null;\nlet prevPage = null;\n\nlet firstPage = 1;\nlet lastPage = firstPage;\n\nexport function initPagination() {\n  if (productStorage.getValue()) {\n    // console.log('init pagination');\n    lastPage = +productStorage.getValue().totalPages;\n    currentPage = +productStorage.getValue().page;\n    renderMarkup(firstPage, lastPage, currentPage);\n  } else buttonsListRef.innerHTML = '';\n}\n\nfunction renderMarkup(firstPage, lastPage, currentPage) {\n  if (lastPage === firstPage || !lastPage) {\n    //render empty list\n\n    buttonsListRef.innerHTML = '';\n    return;\n  }\n  buttonsListRef.innerHTML = createButtonsMarkup(\n    firstPage,\n    lastPage,\n    currentPage\n  );\n  setActiveBtnState(currentPage);\n  if (currentPage === firstPage) {\n    disableBtn(PREV_BTN_ID);\n  }\n  if (currentPage === lastPage) {\n    disableBtn(NEXT_BTN_ID);\n  }\n}\n\nfunction setActiveBtnState(pageNum) {\n  buttonsListRef\n    .querySelector(`[data-button-id='${pageNum}']`)\n    .classList.add(ACTIVE_BTN);\n}\n\nfunction setInactiveBtnState(pageNum) {\n  if (!buttonsListRef.querySelector(`[data-button-id='${pageNum}']`)) {\n    return;\n  }\n  buttonsListRef\n    .querySelector(`[data-button-id='${pageNum}']`)\n    .classList.remove(ACTIVE_BTN);\n}\n\nfunction disableBtn(buttonId) {\n  const btn = buttonsListRef.querySelector(`[data-button-id='${buttonId}']`);\n\n  btn.setAttribute('disabled', '');\n  btn.classList.add('disabled');\n}\n\nfunction scrollToHash(hash) {\n  document.getElementById(hash).scrollIntoView({\n    behavior: 'smooth',\n    block: 'start',\n  });\n}\n\nasync function onPagButtonsClick(event) {\n  const { target } = event;\n  if (!target.classList.contains('pagination-btn')) {\n    return;\n  }\n  scrollToHash('filters');\n\n  if (target.classList.contains('num-btn')) {\n    // console.dir(\n    //   `Запускаем обработчик нажатия на номер ${target.dataset.buttonId}`\n    // );\n    numBtnClick(+target.dataset.buttonId);\n    filterStorage.setValue({\n      ...filterStorage.getValue(),\n      page: +target.dataset.buttonId,\n    });\n    buttonsListRef.removeEventListener('click', onPagButtonsClick);\n    await getProducts(filterStorage.getValue());\n    buttonsListRef.addEventListener('click', onPagButtonsClick);\n  }\n\n  if (target.classList.contains('prev-btn')) {\n    // console.dir(`Запускаем обработчик нажатия на ${target.dataset.buttonId}`);\n    prevBtnClick();\n    filterStorage.setValue({\n      ...filterStorage.getValue(),\n      page: currentPage,\n    });\n\n    buttonsListRef.removeEventListener('click', onPagButtonsClick);\n    await getProducts(filterStorage.getValue());\n    buttonsListRef.addEventListener('click', onPagButtonsClick);\n  }\n  if (target.classList.contains('next-btn')) {\n    // console.dir(`Запускаем обработчик нажатия на ${target.dataset.buttonId}`);\n    nextBtnClick();\n    filterStorage.setValue({\n      ...filterStorage.getValue(),\n      page: currentPage,\n    });\n    buttonsListRef.removeEventListener('click', onPagButtonsClick);\n    await getProducts(filterStorage.getValue());\n    buttonsListRef.addEventListener('click', onPagButtonsClick);\n  }\n}\nfunction numBtnClick(num) {\n  prevPage = currentPage;\n  currentPage = num;\n  renderMarkup(firstPage, lastPage, currentPage);\n  setActiveBtnState(currentPage);\n  //   setInactiveBtnState(prevPage);\n  if (currentPage === firstPage) {\n    disableBtn(PREV_BTN_ID);\n  }\n  if (currentPage === lastPage) {\n    disableBtn(NEXT_BTN_ID);\n  }\n}\n\nfunction prevBtnClick() {\n  prevPage = currentPage;\n  if (currentPage !== firstPage) {\n    currentPage -= 1;\n    renderMarkup(firstPage, lastPage, currentPage);\n    setActiveBtnState(currentPage);\n    // setInactiveBtnState(prevPage);\n    if (currentPage === firstPage) {\n      disableBtn(PREV_BTN_ID);\n    }\n  }\n}\nfunction nextBtnClick() {\n  prevPage = currentPage;\n  if (currentPage !== lastPage) {\n    currentPage += 1;\n    renderMarkup(firstPage, lastPage, currentPage);\n    setActiveBtnState(currentPage);\n    // setInactiveBtnState(prevPage);\n\n    if (currentPage === lastPage) {\n      disableBtn(NEXT_BTN_ID);\n    }\n  }\n}\n\nfunction selectVariant(firstPage, lastPage, currentPage) {\n  if (lastPage <= MAX_BUTTONS_COUNT) {\n    return FIRST_VARIANT;\n  }\n\n  if ((currentPage >= firstPage + 2) & (currentPage <= lastPage - 2)) {\n    return SECOND_VARIANT;\n  }\n  return THIRD_VARIANT;\n}\n\nfunction createButtonsMarkup(firstPage, lastPage, currentPage = 1) {\n  const {\n    prevBtnCreateMarkUp,\n    numBtnCreateMarkUp,\n    intervalBtnCreateMarkUp,\n    nextBtnCreateMarkUp,\n  } = pagButtons;\n\n  let markup = '';\n  const variant = selectVariant(firstPage, lastPage, currentPage);\n  // console.log(variant);\n  if (variant === FIRST_VARIANT) {\n    let numButtonsMarkup = '';\n    for (let i = firstPage; i <= lastPage; i += 1) {\n      numButtonsMarkup += numBtnCreateMarkUp(i);\n    }\n    markup = prevBtnCreateMarkUp() + numButtonsMarkup + nextBtnCreateMarkUp();\n  }\n\n  if (variant === SECOND_VARIANT) {\n    markup =\n      prevBtnCreateMarkUp() +\n      numBtnCreateMarkUp(firstPage) +\n      intervalBtnCreateMarkUp() +\n      numBtnCreateMarkUp(currentPage) +\n      intervalBtnCreateMarkUp() +\n      numBtnCreateMarkUp(lastPage) +\n      nextBtnCreateMarkUp();\n  }\n  if (variant === THIRD_VARIANT) {\n    markup =\n      prevBtnCreateMarkUp() +\n      numBtnCreateMarkUp(firstPage) +\n      numBtnCreateMarkUp(firstPage + 1) +\n      intervalBtnCreateMarkUp() +\n      numBtnCreateMarkUp(lastPage - 1) +\n      numBtnCreateMarkUp(lastPage) +\n      nextBtnCreateMarkUp();\n  }\n\n  return markup;\n}\n","import { getProducts } from './home';\nimport { Storage } from './local-storage-api';\nimport { markupProductsList } from './markup-product-list';\nimport { initPagination } from './pagination/pagination-handler';\n\nconst FILTER_STORAGE = 'filter-storage';\nconst CATEGORY_STORAGE = 'category-storage';\nconst PRODUCT_STORAGE = 'product-storage';\n\nconst filterStorage = new Storage(FILTER_STORAGE);\nconst categoryStorage = new Storage(CATEGORY_STORAGE);\nconst productStorage = new Storage(PRODUCT_STORAGE);\n\nconst INIT_FILTER_PARAMS = {\n  keyword: null,\n  category: null,\n  page: 1,\n  limit: 9,\n};\n// byABC=true&byPrice=true&byPopularity=true4\nconst BY_ABS = 'byABC';\nconst BY_PRICE = 'byPrice';\nconst BY_POPULARITY = 'byPopularity';\nconst SORT_PARAMS = [BY_ABS, BY_PRICE, BY_POPULARITY];\nconst SORT_CONFIGS = [\n  { textName: 'A to Z', paramName: BY_ABS, paramValue: true },\n  { textName: 'Z to A', paramName: BY_ABS, paramValue: false },\n  { textName: 'Cheap', paramName: BY_PRICE, paramValue: true },\n  { textName: 'Expensive', paramName: BY_PRICE, paramValue: false },\n  { textName: 'Popular', paramName: BY_POPULARITY, paramValue: false },\n  { textName: 'Not popular', paramName: BY_POPULARITY, paramValue: true },\n];\n\nconst searchForm = document.querySelector('.js-search-form');\nconst searchInput = document.querySelector('.js-search-input');\n\nconst categorySelect = document.querySelector('.js-category');\nconst ctgMenu = document.querySelector('.custom-select-ctg');\nconst selectOptionCtg = document.querySelector('.js-ctg-select-options');\nconst selectBtnCtg = ctgMenu.querySelector('.categories-btn');\nconst selectCtgInput = ctgMenu.querySelector('.selected-option-ctgr');\n\nconst sortMenu = document.querySelector('.custom-select-sort');\n// const optionsSort = sortMenu.querySelectorAll('.text-options-sort');\nconst sortBtn = sortMenu.querySelector('.sort-btn');\nconst sortInput = sortMenu.querySelector('.selected-option-sort');\nconst sortOptionsContainer = document.querySelector('.js-sort-select-options');\n\nconst SHOW_ALL_OPTION = 'Show all';\n\nselectBtnCtg.addEventListener('click', () => {\n  ctgMenu.classList.toggle('active');\n});\nsortBtn.addEventListener('click', () => {\n  sortMenu.classList.toggle('active');\n});\n\nlet lastSelectedCtgOption = null;\nlet lastSelectedSortOption = null;\n\n// keyword==============================================================\n\nexport function initKeywordInFilter() {\n  if (!filterStorage.getValue()) {\n    return;\n  }\n\n  searchInput.addEventListener('input', onKeywordChange);\n  searchForm.addEventListener('submit', onKeywordSubmit);\n\n  searchInput.value = filterStorage.getValue().keyword;\n}\n\nasync function onKeywordChange(event) {\n  if (!filterStorage.getValue()) {\n    return;\n  }\n\n  if (!event.target.value) {\n    filterStorage.setValue({\n      ...filterStorage.getValue(),\n      keyword: null,\n    });\n    await getProducts(filterStorage.getValue());\n    initPagination();\n    return;\n  }\n\n  filterStorage.setValue({\n    ...filterStorage.getValue(),\n    keyword: event.target.value,\n  });\n}\n\nasync function onKeywordSubmit(event) {\n  event.preventDefault();\n\n  filterStorage.setValue({\n    ...filterStorage.getValue(),\n    keyword: event.currentTarget.elements.search.value,\n    page: 1,\n  });\n\n  await getProducts(filterStorage.getValue());\n  initPagination();\n}\n\n// caterory============================================================\nexport function initCategoryInFilter() {\n  if (!categoryStorage.getValue()) {\n    return;\n  }\n  selectOptionCtg.innerHTML = createCategoryList(categoryStorage.getValue());\n  const options = ctgMenu.querySelectorAll('.text-options');\n  options.forEach(option => {\n    option.addEventListener('click', onCtgOptionClick);\n  });\n}\n\nasync function onCtgOptionClick(event) {\n  let selectedOption = event.currentTarget.innerText;\n\n  if (lastSelectedCtgOption) {\n    lastSelectedCtgOption.style.color = 'rgba(1, 1, 1, 0.5)';\n  }\n\n  selectCtgInput.value = selectedOption;\n  event.currentTarget.style.color = 'var(--text)';\n  ctgMenu.classList.remove('active');\n  // console.log(selectedOption, typeof selectedOption);\n  lastSelectedCtgOption = event.currentTarget;\n\n  if (selectedOption === SHOW_ALL_OPTION) {\n    filterStorage.setValue({\n      ...filterStorage.getValue(),\n      category: null,\n      page: 1,\n    });\n  } else {\n    filterStorage.setValue({\n      ...filterStorage.getValue(),\n      category: selectedOption,\n      page: 1,\n    });\n  }\n\n  await getProducts(filterStorage.getValue());\n  initPagination();\n}\n\nexport function initSelectedCtgOption() {\n  if (!filterStorage.getValue().category) {\n    return;\n  }\n  selectCtgInput.value = filterStorage.getValue().category;\n  const options = ctgMenu.querySelectorAll('.text-options');\n\n  options.forEach(option => {\n    option.style.color = 'rgba(1, 1, 1, 0.5)';\n    if (option.innerText === filterStorage.getValue().category) {\n      option.style.color = 'var(--text)';\n      lastSelectedCtgOption = option;\n    }\n  });\n}\n\nfunction createCategoryList(categories) {\n  return categories\n    .map(category => {\n      return `<div class=\"text-options\" tabindex=\"0\">${category}</div>`;\n    })\n    .join('')\n    .concat(`<div class=\"text-options\" tabindex=\"0\">${SHOW_ALL_OPTION}</div>`);\n}\n// sort==============================================================\n\nexport function initSortInFilter() {\n  sortOptionsContainer.innerHTML = createSortList(SORT_CONFIGS);\n  const options = sortMenu.querySelectorAll('.text-options-sort');\n  options.forEach(option => {\n    option.addEventListener('click', onSortOptionClick);\n  });\n}\n\nexport function initSelectedSortOption() {\n  if (\n    !SORT_PARAMS.some(sortParam =>\n      filterStorage.getValue().hasOwnProperty(sortParam)\n    )\n  ) {\n    return;\n  }\n\n  const currentSortConfig = SORT_CONFIGS.find(sortCongig => {\n    if (!filterStorage.getValue().hasOwnProperty(sortCongig.paramName)) {\n      return false;\n    }\n    return (\n      filterStorage.getValue()[sortCongig.paramName] === sortCongig.paramValue\n    );\n  });\n\n  // console.log(currentSortConfig);\n\n  sortInput.value = currentSortConfig.textName;\n\n  const options = sortMenu.querySelectorAll('.text-options-sort');\n\n  options.forEach(option => {\n    option.style.color = 'rgba(1, 1, 1, 0.5)';\n    if (option.innerText === currentSortConfig.textName) {\n      option.style.color = 'var(--text)';\n      lastSelectedSortOption = option;\n    }\n  });\n}\n\nasync function onSortOptionClick(event) {\n  let selectedOption = event.currentTarget.innerText;\n  if (lastSelectedSortOption) {\n    lastSelectedSortOption.style.color = 'rgba(1, 1, 1, 0.5)';\n  }\n  sortInput.value = selectedOption;\n  event.currentTarget.style.color = 'var(--text)';\n  sortMenu.classList.remove('active');\n  // console.log(selectedOption, typeof selectedOption);\n  lastSelectedSortOption = event.currentTarget;\n\n  deleteSortParamsFromFilterStorage();\n  setSortParamToFilterStorage(selectedOption);\n  await getProducts(filterStorage.getValue());\n  initPagination();\n}\n\nfunction deleteSortParamsFromFilterStorage() {\n  const fsParamsObj = filterStorage.getValue();\n\n  SORT_PARAMS.forEach(sortParam => {\n    if (fsParamsObj.hasOwnProperty(sortParam)) {\n      delete fsParamsObj[sortParam];\n    }\n  });\n\n  filterStorage.setValue(fsParamsObj);\n}\n\nfunction setSortParamToFilterStorage(param) {\n  const paramObj = SORT_CONFIGS.find(\n    sortPraram => sortPraram.textName === param\n  );\n\n  filterStorage.setValue({\n    ...filterStorage.getValue(),\n    [paramObj.paramName]: paramObj.paramValue,\n    page: 1,\n  });\n}\n\nfunction createSortList(sortParams) {\n  return sortParams\n    .map(sortParam => {\n      return `<div class=\"text-options-sort\" tabindex=\"0\">${sortParam.textName}</div>`;\n    })\n    .join('');\n  // .concat(\n  //   `<div class=\"text-options-sort\" tabindex=\"0\">${SHOW_ALL_OPTION}</div>`\n  // );\n}\n","import { FoodBoutiqueAPI } from './food-api';\nimport { Storage, ShopStorage } from './local-storage-api';\nimport { renderProductList } from './render-product-list';\nimport { renderPopularProd, renderDiscountProd } from './aside';\nimport { initPagination } from './pagination/pagination-handler';\nimport {\n  initKeywordInFilter,\n  initCategoryInFilter,\n  initSelectedCtgOption,\n  initSortInFilter,\n  initSelectedSortOption,\n} from './filter';\nimport debounce from 'debounce';\n\nconst FILTER_STORAGE = 'filter-storage';\nconst CATEGORY_STORAGE = 'category-storage';\nconst PRODUCT_STORAGE = 'product-storage';\nconst POPULARITY_STORAGE = 'popularity-storage';\nconst DISCOUNT_STORAGE = 'discount-storage';\nconst SHOP_STORAGE = 'shop-storage';\n\nconst INIT_FILTER_PARAMS = {\n  keyword: null,\n  category: null,\n  byABC: true,\n  page: 1,\n  limit: getPageLimit(),\n};\n\nconst productListRef = document.querySelector('.product-card-list');\nconst popularProductListRef = document.querySelector('.popular-list');\nconst discountProductListRef = document.querySelector('.discount-list');\nconst contentWrapperRef = document.querySelector('.content-wrapper');\nconst spanCartRef = document.querySelector('.js-header-navSpan');\nconst categoryListRef = document.querySelector('.js-category');\n\nconst foodBoutique = new FoodBoutiqueAPI();\nconst filterStorage = new Storage(FILTER_STORAGE);\nconst categoryStorage = new Storage(CATEGORY_STORAGE);\nconst productStorage = new Storage(PRODUCT_STORAGE);\nconst popularityStorage = new Storage(POPULARITY_STORAGE);\nconst discountStorage = new Storage(DISCOUNT_STORAGE);\nconst shopStorage = new ShopStorage(SHOP_STORAGE);\n\n// let allItem;\n\ncontentWrapperRef.addEventListener('click', onButtonCartClick);\nwindow.addEventListener('resize', debounce(onWindowResize, 250));\n\nif (!filterStorage.getValue()) {\n  filterStorage.setValue(INIT_FILTER_PARAMS);\n} else {\n  if (filterStorage.getValue().limit !== getPageLimit()) {\n    setPageLimit();\n  }\n}\n\nconst filterParams = filterStorage.getValue();\ninitLoad(filterParams);\n\nasync function onWindowResize() {\n  // console.log('resize');\n  if (filterStorage.getValue().limit === getPageLimit()) {\n    return;\n  }\n  setPageLimit();\n  await getProducts(filterStorage.getValue());\n  initPagination();\n}\n\nfunction getPageLimit() {\n  if (window.matchMedia('(max-width: 767px)').matches) {\n    return 6;\n  }\n\n  if (\n    window.matchMedia('(min-width: 768px)' && '(max-width: 1439px)').matches\n  ) {\n    return 8;\n  }\n\n  if (window.matchMedia('(min-width: 1440px)').matches) {\n    return 9;\n  }\n}\n\nfunction setPageLimit() {\n  filterStorage.setValue({\n    ...filterStorage.getValue(),\n    page: 1,\n    limit: getPageLimit(),\n  });\n}\n\nasync function initLoad(filterParams) {\n  await Promise.allSettled([\n    getCategories(),\n    getProducts(filterParams),\n    getPopularProducts(),\n    getDiscountedProducts(),\n  ]);\n  initKeywordInFilter();\n  initCategoryInFilter();\n  initSelectedCtgOption();\n  initSortInFilter();\n  initSelectedSortOption();\n  initPagination();\n  // allItem = addListenerToAllCard();\n  // filterHandler();\n  setCartStateForAllProducts();\n}\n\nchangeQuantityOrderedInBasket(shopStorage.getAllProducts());\n\nasync function getCategories() {\n  try {\n    // loader show\n    const productCategories = await foodBoutique.getProductCategories();\n    categoryStorage.setValue(productCategories);\n    // fillCategoryList(categoryListRef, categoryStorage.getValue());\n    // categoryStorage.getValue();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    //  loader hide\n  }\n}\n\nexport async function getProducts(filterParams) {\n  try {\n    // loader show\n    productListRef.classList.add('js-loader');\n    const products = await foodBoutique.getProducts(filterParams);\n    productStorage.setValue(products);\n\n    // if (!filterStorage.getValue()) {\n    //   filterStorage.setValue(filterParams);\n    // }\n    renderProductList(productListRef, productStorage.getValue().results);\n    setCartStateForAllProducts();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    productListRef.classList.remove('js-loader');\n  }\n}\n\nasync function getPopularProducts() {\n  try {\n    // loader show\n    popularProductListRef.classList.add('js-loader');\n    const popularProducts = await foodBoutique.getPopularProducts();\n    popularityStorage.setValue(popularProducts);\n    renderPopularProd(popularProductListRef, popularityStorage.getValue());\n  } catch (error) {\n    console.log(error);\n  } finally {\n    //  loader hide\n    popularProductListRef.classList.remove('js-loader');\n  }\n}\n\nasync function getDiscountedProducts() {\n  try {\n    // loader show\n    discountProductListRef.classList.add('js-loader');\n    const discountedProducts = await foodBoutique.getDiscountedProducts();\n    discountStorage.setValue(discountedProducts);\n    renderDiscountProd(discountProductListRef, discountStorage.getValue());\n  } catch (error) {\n    console.log(error);\n  } finally {\n    //  loader hide\n    discountProductListRef.classList.remove('js-loader');\n  }\n}\n//-----------filter--------------------------------------------------------------------------\n\n// function addListenerToAllCard() {\n//   const li = document.querySelectorAll('.js-card-item');\n\n//   getOverItems(li);\n//   return li;\n// }\n\n// function getOverItems(arrNodeList) {\n//   const arr = [...arrNodeList];\n\n//   return arr.filter(item => {\n//     const arrFromShop = shopStorage.getAllProducts();\n\n//     return arrFromShop.map(obj => {\n//       if (item.dataset.id === obj._id) {\n//         // console.log(item);\n//         const btnItemRef = document.querySelectorAll(\n//           `[data-id=\"${obj._id}\"] .js-add-btn`\n//         );\n//         // console.log(btnItemRef);\n\n//         if (typeof btnItemRef === 'object') {\n//           [...btnItemRef].map(el => {\n//             if (el.classList.contains('popular-btn')) {\n//               el.style.backgroundColor = '#6d8434';\n//             }\n//             return el.classList.add('is-added');\n//           });\n//         } else {\n//           if (btnItemRef.classList.contains('popular-btn')) {\n//             btnItemRef.style.backgroundColor = '#6d8434';\n//           }\n//           btnItemRef.classList.add('is-added');\n//         }\n//       }\n//     });\n//   });\n// }\n\n// function onButtonCartClick(e) {\n//   if (!e.target.closest('.js-add-btn')) return;\n//   /////////////////////////////////////////////////////\n\n//   const item = e.target.closest('li');\n//   const idCard = item.dataset.id;\n//   const isNewIDinBasket = checkNewIDinBasket(idCard);\n\n//   if (isNewIDinBasket) return;\n\n//   e.target.closest('button').classList.add('is-added');\n\n//   if (e.target.closest('.popular-btn')) {\n//     e.target.closest('.popular-btn').style.backgroundColor = '#6d8434';\n//   }\n\n//   const arrProdStor = productStorage.getValue().results;\n//   const arrPopStor = popularityStorage.getValue();\n//   const arrDiscStor = discountStorage.getValue();\n\n//   const objFromProdStor = objFromLocStor(arrProdStor, idCard);\n//   const objFromPopStor = objFromLocStor(arrPopStor, idCard);\n//   const objFromDiscStor = objFromLocStor(arrDiscStor, idCard);\n\n//   switch ('object') {\n//     case typeof objFromProdStor:\n//       shopStorage.setProduct(objFromProdStor);\n//       break;\n//     case typeof objFromPopStor:\n//       shopStorage.setProduct(objFromPopStor);\n//       break;\n//     case typeof objFromDiscStor:\n//       shopStorage.setProduct(objFromDiscStor);\n//       break;\n//     default:\n//       alert('Нет таких значений');\n//   }\n\n//   changeButtonsOnClick(e, idCard);\n//   changeQuantityOrderedInBasket(shopStorage.getAllProducts());\n\n//   function getOverItems(cardId, arrNodeList) {\n//     const arr = [...arrNodeList];\n//     // const newArrById = arr.filter(item=>{\n//     //   return item.dataset.id === cardId\n//     // })\n//     return arr.forEach(item => {\n//       if (item.dataset.id === cardId) {\n//         // console.dir(item.children);\n//         item.classList.add('is-added');\n//       }\n//     });\n//     // console.log(newArrById);\n//   }\n\n//   getOverItems(idCard, allItem);\n// }\n\n// function checkNewIDinBasket(id) {\n//   const shopStorageProducts = shopStorage.getAllProducts();\n//   if (shopStorageProducts === null) return;\n//   return shopStorageProducts.some(el => el._id === id);\n// }\n\n// function objFromLocStor(arrDataLocalStorage, idCard) {\n//   const obj = arrDataLocalStorage.find(el => el._id === idCard);\n//   return obj;\n// }\n\n// function changeButtonsOnClick(eventFromHandler, cardId) {\n//   const productList = document.querySelector('.product-card-list');\n//   const popularList = document.querySelector('.popular-list');\n//   const discountList = document.querySelector('.discount-list');\n\n//   const arrProduct = [...productList.children];\n//   const arrDiscount = [...discountList.children];\n//   const arrPopular = [...popularList.children];\n\n//   if (eventFromHandler.target.closest('.products-wrapper')) {\n//     arrPopular.forEach(el => {\n//       if (el.dataset.id === cardId) {\n//         const elBtnRef = document.querySelector(\n//           `.popular-list [data-id=\"${el.dataset.id}\"] .js-add-btn`\n//         );\n//         elBtnRef.classList.add('is-added');\n//         elBtnRef.style.backgroundColor = '#6d8434';\n//       }\n//     });\n\n//     arrDiscount.forEach(el => {\n//       if (el.dataset.id === cardId) {\n//         const elBtnRef = document.querySelector(\n//           `.discount-list [data-id=\"${el.dataset.id}\"] .js-add-btn`\n//         );\n//         elBtnRef.classList.add('is-added');\n//       }\n//     });\n//   }\n\n//   if (eventFromHandler.target.closest('.popular-list')) {\n//     arrProduct.forEach(el => {\n//       if (el.dataset.id === cardId) {\n//         const elBtnRef = document.querySelector(\n//           `.product-card-list [data-id=\"${el.dataset.id}\"] .js-add-btn`\n//         );\n//         elBtnRef.classList.add('is-added');\n//       }\n//     });\n\n//     arrDiscount.forEach(el => {\n//       if (el.dataset.id === cardId) {\n//         const elBtnRef = document.querySelector(\n//           `.discount-list [data-id=\"${el.dataset.id}\"] .js-add-btn`\n//         );\n//         console.log(elBtnRef);\n//         elBtnRef.classList.add('is-added');\n//       }\n//     });\n//   }\n\n//   if (eventFromHandler.target.closest('.discount-list')) {\n//     arrPopular.forEach(el => {\n//       if (el.dataset.id === cardId) {\n//         const elBtnRef = document.querySelector(\n//           `.popular-list [data-id=\"${el.dataset.id}\"] .js-add-btn`\n//         );\n//         elBtnRef.classList.add('is-added');\n//         elBtnRef.style.backgroundColor = '#6d8434';\n//       }\n//     });\n\n//     arrProduct.forEach(el => {\n//       if (el.dataset.id === cardId) {\n//         const elBtnRef = document.querySelector(\n//           `.product-card-list [data-id=\"${el.dataset.id}\"] .js-add-btn`\n//         );\n//         elBtnRef.classList.add('is-added');\n//       }\n//     });\n//   }\n// }\n\n// ============dima edition==========================================================================\n\nconst LISTS_TO_INSPECT = [\n  productListRef,\n  popularProductListRef,\n  discountProductListRef,\n];\n\nconst PRODUCT_STORAGE_LIST_ID = 'product';\nconst POPULARITY_STORAGE_LIST_ID = 'popular';\nconst DISCOUNT_STORAGE_LIST_ID = 'discount';\n\nconst IN_CART = true;\nconst NOT_IN_CART = false;\n\nconst IS_ADDED_CLASS = 'is-added';\nconst BTN_CART_CLASS = 'js-add-btn';\nconst CARD_LI_CLASS = 'js-card-item';\n\nexport function setCartStateForAllProducts() {\n  if (!shopStorage || !shopStorage.getAllProducts().length) {\n    return;\n  }\n  shopStorage\n    .getAllProducts()\n    .map(({ _id }) => setCartStateForOneProduct(_id, IN_CART));\n}\n\nexport function setCartStateForOneProduct(prodId, state) {\n  const buttons = LISTS_TO_INSPECT.map(list => getButtonById(list, prodId));\n  // Установка состояния кнопок\n  changeButtonsState(buttons, state);\n}\n\nfunction getButtonById(list, prodId) {\n  return list.querySelector(`[data-id=\"${prodId}\"]`)\n    ? list.querySelector(`[data-id=\"${prodId}\"]`).querySelector('.js-add-btn')\n    : null;\n}\n\nfunction changeButtonsState(buttons, state) {\n  buttons.map(btn => {\n    if (!btn) {\n      return;\n    }\n    if (state === IN_CART) {\n      btn.classList.add(IS_ADDED_CLASS);\n      return;\n    }\n    if (!state) {\n      btn.classList.remove(IS_ADDED_CLASS);\n      return;\n    }\n  });\n}\n\nfunction onButtonCartClick(event) {\n  const { target } = event;\n  // console.dir(target.closest(`.${BTN_CART_CLASS}`));\n  if (\n    !(\n      target.classList.contains(BTN_CART_CLASS) ||\n      target.parentNode.classList.contains(BTN_CART_CLASS) ||\n      target.closest(`.${BTN_CART_CLASS}`)\n    ) ||\n    target.classList.contains(IS_ADDED_CLASS) ||\n    target.parentNode.classList.contains(IS_ADDED_CLASS) ||\n    target.closest(`.${IS_ADDED_CLASS}`)\n  ) {\n    return;\n  }\n\n  const prodId = target.closest(`.${CARD_LI_CLASS}`).dataset.id;\n  const localStorageDataId = target.closest(`ul`).dataset.lsName;\n  // console.log(localStorageDataId);\n\n  setCartStateForOneProduct(prodId, IN_CART);\n  addProductToStorage(localStorageDataId, prodId);\n}\n\nfunction getProductFromStorageArr(prodDataArr, prodId) {\n  const obj = prodDataArr.find(el => el._id === prodId);\n  return obj;\n}\n\nfunction addProductToStorage(localStorageDataId, prodId) {\n  let product = {};\n\n  switch (localStorageDataId) {\n    case PRODUCT_STORAGE_LIST_ID: {\n      product = getProductFromStorageArr(\n        productStorage.getValue().results,\n        prodId\n      );\n      break;\n    }\n    case POPULARITY_STORAGE_LIST_ID: {\n      product = getProductFromStorageArr(popularityStorage.getValue(), prodId);\n      break;\n    }\n    case DISCOUNT_STORAGE_LIST_ID: {\n      product = getProductFromStorageArr(discountStorage.getValue(), prodId);\n      break;\n    }\n    default: {\n      product = {};\n    }\n  }\n\n  shopStorage.setProduct(product);\n  changeQuantityOrderedInBasket(shopStorage.getAllProducts());\n}\n\nexport function changeQuantityOrderedInBasket(arrFromLocStor) {\n  let quantityOrdered = arrFromLocStor.length;\n  spanCartRef.textContent = quantityOrdered;\n}\n","import { markupProductsList } from './markup-product-list';\nimport { openModal } from './modal-markup';\nimport { ShopStorage } from './local-storage-api';\nconst listEl = document.querySelector('.content-wrapper');\nlistEl.addEventListener('click', onClickCart);\n\n//   export function onClickCart(e) {\n//   e.preventDefault();\n//   const clickedElement = e.target;\n//   if (clickedElement.nodeName === 'IMG' || clickedElement.nodeName === 'H4') {\n//     const Id = clickedElement.closest('.products-card-item').dataset.id;\n//     openModal(Id);\n//   } else {\n//     return;\n//   }\n// }\n\nexport function onClickCart(e) {\n  e.preventDefault();\n  const clickedElement = e.target;\n  if (\n    clickedElement.closest('a') &&\n    clickedElement.closest('.products-card-link')\n  ) {\n    const id = clickedElement.closest('li').dataset.id;\n    openModal(id);\n  } else {\n    return;\n  }\n}\n","import { FoodBoutiqueAPI } from './food-api';\nimport icons from '../img/icons.svg';\nimport { onClickCart } from './product-list-click';\nimport { ShopStorage } from './local-storage-api';\nimport { setCartStateForOneProduct } from './home';\nimport { changeQuantityOrderedInBasket } from './home';\nconst modalEl = document.querySelector('.modal-prod-wrapper');\n// const spanCartRef = document.querySelector('.js-header-navSpan');\nconst SHOP_STORAGE = 'shop-storage';\nconst shopStorage = new ShopStorage(SHOP_STORAGE);\nconst api = new FoodBoutiqueAPI();\n\nexport async function openModal(Id) {\n  // console.log(Id);\n  try {\n    modalEl.classList.add('modal-active');\n    modalEl.classList.add('js-loader');\n    const productDetails = await api.getProductDetails(Id);\n    modalEl.classList.remove('js-loader');\n    renderModal(productDetails);\n    isCurrentCart(productDetails);\n  } catch (error) {\n  } finally {\n  }\n}\n\n//! Функція яка зберігає стан кнопки залежно від стану корзини\nfunction isCurrentCart(productDetails) {\n  const addBtnText = document.querySelector('.modal-prod-add-text');\n  const productId = productDetails._id;\n  const currentCart = shopStorage.getAllProducts();\n\n  if (currentCart.some(item => item._id === productId)) {\n    addBtnText.textContent = 'Remove from';\n  } else {\n    addBtnText.textContent = 'Add to';\n  }\n}\n\n//! Функція рендеру розмітки\nasync function renderModal(productDetails) {\n  try {\n    modalEl.classList.add('modal-active');\n    document.body.classList.add('stop-scroll');\n\n    modalEl.innerHTML = `\n  <div class=\"modal-prod-card\">\n  <button type=\"button\" class=\"modal-prod-close-btn\">\n    <svg class=\"modal-prod-close-icon\" width=\"22\" height=\"22\">\n      <use href=\"${icons}#icon-close\"></use>\n    </svg>\n  </button>\n  <div class=\"modal-prod-information-wrap\">\n  <div class=\"modal-prod-img-wrap\">   \n      <img class=\"modal-prod-img\" src=\"${productDetails.img}\" alt=\"${productDetails.name}\" />\n  </div> \n  <div class=\"modal-prod-name-wrap\">\n  <p class=\"modal-prod-name\">${productDetails.name}</p>\n  <ul class=\"modal-prod-list\">\n    <li class=\"modal-prod-item\">\n      <p class=\"modal-prod-text\">Category: <span>${productDetails.category}</span></p>\n    </li>\n    <li class=\"modal-prod-item\">\n      <p class=\"modal-prod-text\">Size: <span>${productDetails.size}</span></p>\n    </li>\n    <li class=\"modal-prod-item\">\n      <p class=\"modal-prod-text\">Popularity: <span>${productDetails.popularity}</span></p>\n    </li>\n  </ul>\n  <p class=\"modal-prod-desc\">${productDetails.desc}</p>\n  </div>\n  </div>\n  <div class=\"modal-prod-price-elem\">\n  <p class=\"modal-prod-price\">&#36;${productDetails.price}</p>\n  <button class=\"modal-prod-add-btn\">\n      <p class=\"modal-prod-add-text\">Add to</p>\n      <svg class=\"modal-prod-basket-icon\" >\n        <use href=\"${icons}#icon-shopping-cart\"></use>\n      </svg>\n  </button>\n  </div>\n  </div>\n  `;\n\n    const addBtn = document.querySelector('.modal-prod-add-btn');\n    addBtn.addEventListener('click', () => addToCart(productDetails));\n\n    const closeBtn = document.querySelector('.modal-prod-close-btn');\n    closeBtn.addEventListener('click', () => closeModal());\n\n    // Додаю слухачі подій\n    window.addEventListener('click', closeModalOnWindowClick);\n    window.addEventListener('keydown', closeModalOnEsc);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n//! Функція додавання в корзину и зміни стану кнопки\nexport function addToCart(productDetails) {\n  const productId = productDetails._id;\n\n  const currentCart = shopStorage.getAllProducts();\n  const isProductInCart = currentCart.some(item => item._id === productId);\n  const addBtnText = document.querySelector('.modal-prod-add-text');\n\n  if (isProductInCart) {\n    addBtnText.textContent = 'Add to';\n    shopStorage.removeProduct(productId);\n    setCartStateForOneProduct(productId, false);\n    changeQuantityOrderedInBasket(shopStorage.getAllProducts());\n  } else {\n    addBtnText.textContent = 'Remove from';\n    shopStorage.setProduct(productDetails);\n    setCartStateForOneProduct(productId, true);\n    changeQuantityOrderedInBasket(shopStorage.getAllProducts());\n  }\n}\n//! Функція закриття модалки при кліку на хрестик\n\nfunction closeModal() {\n  document.body.classList.remove('stop-scroll');\n  modalEl.classList.remove('modal-active');\n  modalEl.innerHTML = '';\n\n  // Видаляю слухачі подій\n  window.removeEventListener('click', closeModalOnWindowClick);\n  window.removeEventListener('keydown', closeModalOnEsc);\n}\n\n//! Закриття модалки при кліку по бекдропу\n\nfunction closeModalOnWindowClick(e) {\n  if (e.target === modalEl) {\n    closeModal();\n  }\n}\n\n//! Закриття модалки при кліку на кнопку ESC\n\nfunction closeModalOnEsc(e) {\n  if (e.keyCode === 27) {\n    closeModal();\n  }\n}\n","const optionMenu = document.querySelector('.custom-select-ctg');\nconst selectBtnCtg = optionMenu.querySelector('.categories-btn');\nconst options = optionMenu.querySelectorAll('.text-options');\nconst selectCtgInput = optionMenu.querySelector('.selected-option');\n\n// selectBtnCtg.addEventListener('click', () => {\n//   optionMenu.classList.toggle('active');\n// });\n\n// let lastSelectedOption = null;\n\n// options.forEach(option => {\n//   option.addEventListener('click', () => {\n//     let selectedOption = option.innerText;\n\n//     if (lastSelectedOption) {\n//       lastSelectedOption.style.color = 'rgba(1, 1, 1, 0.5)';\n//     }\n\n//     selectCtgInput.value = selectedOption;\n//     option.style.color = 'var(--text)';\n//     optionMenu.classList.remove('active');\n//     console.log(selectedOption);\n\n//     lastSelectedOption = option;\n\n//     // Здесь должен быть код для выполнения запроса к API с параметром selectedOption\n//   });\n// });\n\nconst sortMenu = document.querySelector('.custom-select-sort');\nconst selectBtnSort = sortMenu.querySelector('.sort-btn');\nconst optionsSort = sortMenu.querySelectorAll('.text-options-sort');\nconst selectInputSort = sortMenu.querySelector('.selected-option');\n\n// selectBtnSort.addEventListener('click', () => {\n//   sortMenu.classList.toggle('active');\n// });\n\n// let lastSelectedOptionSort = null;\n\n// optionsSort.forEach(option => {\n//   option.addEventListener('click', () => {\n//     let selectedOptionSort = option.innerText;\n\n//     if (lastSelectedOptionSort) {\n//       lastSelectedOptionSort.style.color = 'rgba(1, 1, 1, 0.5)';\n//     }\n\n//     selectInputSort.value = selectedOptionSort;\n//     option.style.color = 'var(--text)';\n//     sortMenu.classList.remove('active');\n//     console.log(selectedOptionSort);\n\n//     lastSelectedOptionSort = option;\n\n//     // Здесь должен быть код для выполнения запроса к API с параметром selectedOptionSort\n//   });\n// });\n\ndocument.addEventListener('click', function (event) {\n  const isClickInsideOptionMenu = optionMenu.contains(event.target);\n  const isClickInsideSortMenu = sortMenu.contains(event.target);\n\n  if (!isClickInsideOptionMenu) {\n    optionMenu.classList.remove('active');\n  }\n\n  if (!isClickInsideSortMenu) {\n    sortMenu.classList.remove('active');\n  }\n});\n\ndocument.addEventListener('keydown', function (event) {\n  if (event.code === 'Escape') {\n    optionMenu.classList.remove('active');\n    sortMenu.classList.remove('active');\n  }\n});\n\n// sortMenu.addEventListener('keydown', (event) => {\n//   if (event.code === 'Space') {\n//     sortMenu.classList.toggle('active');\n//     event.preventDefault();\n//   }\n// });\n\n// optionMenu.addEventListener('keydown', (event) => {\n//   if (event.code === 'Space') {\n//     optionMenu.classList.toggle('active');\n//     event.preventDefault();\n//   }\n// });\n"],"names":["markupProductsList","productsObj","category","img","is10PercentOff","name","popularity","price","size","_id","icons","renderProductList","elemRef","products","renderPopularProd","listenerPopularListRef","dataPopularProduct","markupPopular","renderDiscountProd","listenerDiscountListRef","dataDiscountProduct","markupDiscount","obj","item","PaginationButtons","num","FIRST_VARIANT","SECOND_VARIANT","THIRD_VARIANT","ACTIVE_BTN","PREV_BTN_ID","NEXT_BTN_ID","MAX_BUTTONS_COUNT","PRODUCT_STORAGE","FILTER_STORAGE","filterStorage","Storage","productStorage","pagButtons","buttonsListRef","onPagButtonsClick","currentPage","firstPage","lastPage","initPagination","renderMarkup","createButtonsMarkup","setActiveBtnState","disableBtn","pageNum","buttonId","btn","scrollToHash","hash","event","target","numBtnClick","getProducts","prevBtnClick","nextBtnClick","selectVariant","prevBtnCreateMarkUp","numBtnCreateMarkUp","intervalBtnCreateMarkUp","nextBtnCreateMarkUp","markup","variant","numButtonsMarkup","i","CATEGORY_STORAGE","categoryStorage","BY_ABS","BY_PRICE","BY_POPULARITY","SORT_PARAMS","SORT_CONFIGS","searchForm","searchInput","ctgMenu","selectOptionCtg","selectBtnCtg","selectCtgInput","sortMenu","sortBtn","sortInput","sortOptionsContainer","SHOW_ALL_OPTION","lastSelectedCtgOption","lastSelectedSortOption","initKeywordInFilter","onKeywordChange","onKeywordSubmit","initCategoryInFilter","createCategoryList","option","onCtgOptionClick","selectedOption","initSelectedCtgOption","categories","initSortInFilter","createSortList","onSortOptionClick","initSelectedSortOption","sortParam","currentSortConfig","sortCongig","deleteSortParamsFromFilterStorage","setSortParamToFilterStorage","fsParamsObj","param","paramObj","sortPraram","sortParams","POPULARITY_STORAGE","DISCOUNT_STORAGE","SHOP_STORAGE","INIT_FILTER_PARAMS","getPageLimit","productListRef","popularProductListRef","discountProductListRef","contentWrapperRef","spanCartRef","foodBoutique","FoodBoutiqueAPI","popularityStorage","discountStorage","shopStorage","ShopStorage","onButtonCartClick","debounce","onWindowResize","setPageLimit","filterParams","initLoad","getCategories","getPopularProducts","getDiscountedProducts","setCartStateForAllProducts","changeQuantityOrderedInBasket","productCategories","error","popularProducts","discountedProducts","LISTS_TO_INSPECT","PRODUCT_STORAGE_LIST_ID","POPULARITY_STORAGE_LIST_ID","DISCOUNT_STORAGE_LIST_ID","IN_CART","IS_ADDED_CLASS","BTN_CART_CLASS","CARD_LI_CLASS","setCartStateForOneProduct","prodId","state","buttons","list","getButtonById","changeButtonsState","localStorageDataId","addProductToStorage","getProductFromStorageArr","prodDataArr","el","product","arrFromLocStor","quantityOrdered","listEl","onClickCart","e","clickedElement","id","openModal","modalEl","api","Id","productDetails","renderModal","isCurrentCart","addBtnText","productId","addToCart","closeModal","closeModalOnWindowClick","closeModalOnEsc","isProductInCart","optionMenu","isClickInsideOptionMenu","isClickInsideSortMenu"],"mappings":"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"}