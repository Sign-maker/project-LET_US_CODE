{"version":3,"file":"local-storage-api-bc28ed9f.js","sources":["../../src/js/local-storage-api.js"],"sourcesContent":["export class Storage {\n  constructor(storageName) {\n    this.storageName = storageName;\n  }\n  setValue(data) {\n    localStorage.setItem(this.storageName, JSON.stringify(data));\n  }\n  getValue() {\n    return JSON.parse(localStorage.getItem(this.storageName));\n  }\n  removeItem() {\n    localStorage.removeItem(this.storageName);\n  }\n}\n\nexport class ShopStorage {\n  shopCart = [];\n  constructor(storageName) {\n    this.storageName = storageName;\n    this.initStorage();\n  }\n  // add 1 obj to shop Arr and set it to LS\n  initStorage() {\n    if (this.getAllProducts()) {\n      // console.log('LS уже создан', this.getAllProducts());\n      this.shopCart = this.getAllProducts();\n      return;\n    }\n    localStorage.setItem(this.storageName, JSON.stringify([]));\n  }\n  setProduct(obj) {\n    if (!obj) {\n      // console.log(`Пустой запрос`);\n      return;\n    }\n    if (this.shopCart.some(item => item._id === obj._id)) {\n      // console.log(`Продукт с ${obj._id} уже есть в хранилище`);\n      return;\n    }\n\n    this.shopCart.push(obj);\n    localStorage.setItem(this.storageName, JSON.stringify(this.shopCart));\n  }\n\n  setAllProduct(dataArr) {\n    localStorage.setItem(this.storageName, JSON.stringify(dataArr));\n  }\n\n  getAllProducts() {\n    return JSON.parse(localStorage.getItem(this.storageName));\n  }\n  //  remove product from LS by id\n  removeProduct(productId) {\n    this.shopCart = this.getAllProducts().filter(\n      item => item._id !== productId\n    );\n    this.setAllProduct(this.shopCart);\n  }\n\n  removeAllProducts() {\n    this.shopCart = [];\n    this.setAllProduct(this.shopCart);\n  }\n}\n\n// how to use Storage==========================================================================\n// check your from path!\n// import{Storage} from './local-storage-api'\n\n// const FILTER_STORAGE = 'filter-storage';\n// const CATEGORY_STORAGE = 'category-storage';\n// const PRODUCT_STORAGE = 'product-storage';\n// const POPULARITY_STORAGE = 'popularity-storage';\n// const DISCOUNT_STORAGE = 'discount-storage';\n\n// const filterStorage = new Storage(FILTER_STORAGE);\n// const categoryStorage = new Storage(CATEGORY_STORAGE);\n// const productStorage = new Storage(PRODUCT_STORAGE);\n// const popularityStorage = new Storage(POPULARITY_STORAGE);\n// const discountStorage = new Storage(DISCOUNT_STORAGE);\n\n// work with it!\n// filterStorage.setValue(data);\n// filterStorage.getValue();\n// filterStorage.removeItem();\n\n// how to use ShopStorage=========================================================================\n// check your from path!\n// import{ShopStorage} from './local-storage-api'\n\n// const SHOP_STORAGE = 'shop-storage';\n\n// инициализация;\n// const shopStorage = new ShopStorage(SHOP_STORAGE);\n\n// добавляем продукт\n// shopStorage.setProduct(productObj);\n\n// считываем все продукты\n// const shopStorageProducts = shopStorage.getAllProducts();\n\n// уделяем отдельный продукт все продукты\n// shopStorage.removeProduct('640c2dd963a319ea671e37ad');\n\n// удаляем все продукты\n//shopStorage.removeAllProducts();\n"],"names":["Storage","storageName","data","ShopStorage","__publicField","obj","item","dataArr","productId"],"mappings":"82BAAO,MAAMA,CAAQ,CACnB,YAAYC,EAAa,CACvB,KAAK,YAAcA,CACpB,CACD,SAASC,EAAM,CACb,aAAa,QAAQ,KAAK,YAAa,KAAK,UAAUA,CAAI,CAAC,CAC5D,CACD,UAAW,CACT,OAAO,KAAK,MAAM,aAAa,QAAQ,KAAK,WAAW,CAAC,CACzD,CACD,YAAa,CACX,aAAa,WAAW,KAAK,WAAW,CACzC,CACH,CAEO,MAAMC,CAAY,CAEvB,YAAYF,EAAa,CADzBG,EAAA,gBAAW,CAAA,GAET,KAAK,YAAcH,EACnB,KAAK,YAAW,CACjB,CAED,aAAc,CACZ,GAAI,KAAK,iBAAkB,CAEzB,KAAK,SAAW,KAAK,iBACrB,MACD,CACD,aAAa,QAAQ,KAAK,YAAa,KAAK,UAAU,CAAE,CAAA,CAAC,CAC1D,CACD,WAAWI,EAAK,CACTA,IAID,KAAK,SAAS,KAAKC,GAAQA,EAAK,MAAQD,EAAI,GAAG,IAKnD,KAAK,SAAS,KAAKA,CAAG,EACtB,aAAa,QAAQ,KAAK,YAAa,KAAK,UAAU,KAAK,QAAQ,CAAC,GACrE,CAED,cAAcE,EAAS,CACrB,aAAa,QAAQ,KAAK,YAAa,KAAK,UAAUA,CAAO,CAAC,CAC/D,CAED,gBAAiB,CACf,OAAO,KAAK,MAAM,aAAa,QAAQ,KAAK,WAAW,CAAC,CACzD,CAED,cAAcC,EAAW,CACvB,KAAK,SAAW,KAAK,eAAgB,EAAC,OACpCF,GAAQA,EAAK,MAAQE,CAC3B,EACI,KAAK,cAAc,KAAK,QAAQ,CACjC,CAED,mBAAoB,CAClB,KAAK,SAAW,GAChB,KAAK,cAAc,KAAK,QAAQ,CACjC,CACH"}