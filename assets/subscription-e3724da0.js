var u=Object.defineProperty;var d=(r,t,s)=>t in r?u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var c=(r,t,s)=>(d(r,typeof t!="symbol"?t+"":t,s),s);import{a as i,S as l}from"./vendor-bb007519.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function s(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(e){if(e.ep)return;e.ep=!0;const a=s(e);fetch(e.href,a)}})();class y{constructor(t){this.storageName=t}setValue(t){localStorage.setItem(this.storageName,JSON.stringify(t))}getValue(){return JSON.parse(localStorage.getItem(this.storageName))}removeItem(){localStorage.removeItem(this.storageName)}}class S{constructor(t){c(this,"shopCart",[]);this.storageName=t,this.initStorage()}initStorage(){if(this.getAllProducts()){this.shopCart=this.getAllProducts();return}localStorage.setItem(this.storageName,JSON.stringify([]))}setProduct(t){t&&(this.shopCart.some(s=>s._id===t._id)||(this.shopCart.push(t),localStorage.setItem(this.storageName,JSON.stringify(this.shopCart))))}setAllProduct(t){localStorage.setItem(this.storageName,JSON.stringify(t))}getAllProducts(){return JSON.parse(localStorage.getItem(this.storageName))}removeProduct(t){this.shopCart=this.getAllProducts().filter(s=>s._id!==t),this.setAllProduct(this.shopCart)}removeAllProducts(){this.shopCart=[],this.setAllProduct(this.shopCart)}}i.defaults.baseURL="https://food-boutique.b.goit.study/api";class p{constructor(){}async getProductCategories(){const{data:t}=await i("/products/categories");return t}async getProducts(t){const{data:s}=await i("/products",{params:{...t}});return s}async getProductDetails(t){const{data:s}=await i(`/products/${t}`);return s}async getPopularProducts(){const{data:t}=await i("/products/popular");return t}async getDiscountedProducts(){const{data:t}=await i("/products/discount");return t}async subscribeToNewsletter(t){return await i.post("/subscription",t,{headers:{"Content-Type":"application/json"}})}async placeOrder(t){const{data:s}=await i.post("/orders",t,{headers:{"Content-Type":"application/json"}});return s}}const m=new p,g=document.querySelector('form[name="email_address"]');g.addEventListener("submit",async function(r){r.preventDefault();const t=r.currentTarget.elements["footer-input-email"],s=t.value;try{const o=await m.subscribeToNewsletter({email:s});t.value="";let e="Successfully subscribed!";o&&o.data&&o.data.message&&(e=o.data.message),l.fire({icon:"success",title:e,showConfirmButton:!0,confirmButtonColor:"#6D8434",showCancelButton:!1,customClass:{popup:"small-popup",title:"custom-title",icon:"custom-icon"}})}catch(o){console.error("Error:",o);let e="There was an error subscribing. Please try again.";o.response&&o.response.data&&o.response.data.message&&(e=o.response.data.message),l.fire({icon:"error",title:"Error",text:e,showConfirmButton:!0,confirmButtonColor:"#6D8434",showCancelButton:!1,customClass:{popup:"small-popup",title:"custom-title",icon:"custom-icon"}})}});export{p as F,S,y as a};
//# sourceMappingURL=subscription-e3724da0.js.map
