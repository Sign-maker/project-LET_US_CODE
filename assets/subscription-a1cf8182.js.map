{"version":3,"file":"subscription-a1cf8182.js","sources":["../../src/js/local-storage-api.js","../../src/js/food-api.js","../../src/js/subscription.js"],"sourcesContent":["export class Storage {\n  constructor(storageName) {\n    this.storageName = storageName;\n  }\n  setValue(data) {\n    localStorage.setItem(this.storageName, JSON.stringify(data));\n  }\n  getValue() {\n    return JSON.parse(localStorage.getItem(this.storageName));\n  }\n  removeItem() {\n    localStorage.removeItem(this.storageName);\n  }\n}\n\nexport class ShopStorage {\n  shopCart = [];\n  constructor(storageName) {\n    this.storageName = storageName;\n    this.initStorage();\n  }\n  // add 1 obj to shop Arr and set it to LS\n  initStorage() {\n    if (this.getAllProducts()) {\n      // console.log('LS уже создан', this.getAllProducts());\n      this.shopCart = this.getAllProducts();\n      return;\n    }\n    localStorage.setItem(this.storageName, JSON.stringify([]));\n  }\n  setProduct(obj) {\n    if (!obj) {\n      // console.log(`Пустой запрос`);\n      return;\n    }\n    if (this.shopCart.some(item => item._id === obj._id)) {\n      // console.log(`Продукт с ${obj._id} уже есть в хранилище`);\n      return;\n    }\n\n    this.shopCart.push(obj);\n    localStorage.setItem(this.storageName, JSON.stringify(this.shopCart));\n  }\n\n  setAllProduct(dataArr) {\n    localStorage.setItem(this.storageName, JSON.stringify(dataArr));\n  }\n\n  getAllProducts() {\n    return JSON.parse(localStorage.getItem(this.storageName));\n  }\n  //  remove product from LS by id\n  removeProduct(productId) {\n    this.shopCart = this.getAllProducts().filter(\n      item => item._id !== productId\n    );\n    this.setAllProduct(this.shopCart);\n  }\n\n  removeAllProducts() {\n    this.shopCart = [];\n    this.setAllProduct(this.shopCart);\n  }\n}\n\n// how to use Storage==========================================================================\n// check your from path!\n// import{Storage} from './local-storage-api'\n\n// const FILTER_STORAGE = 'filter-storage';\n// const CATEGORY_STORAGE = 'category-storage';\n// const PRODUCT_STORAGE = 'product-storage';\n// const POPULARITY_STORAGE = 'popularity-storage';\n// const DISCOUNT_STORAGE = 'discount-storage';\n\n// const filterStorage = new Storage(FILTER_STORAGE);\n// const categoryStorage = new Storage(CATEGORY_STORAGE);\n// const productStorage = new Storage(PRODUCT_STORAGE);\n// const popularityStorage = new Storage(POPULARITY_STORAGE);\n// const discountStorage = new Storage(DISCOUNT_STORAGE);\n\n// work with it!\n// filterStorage.setValue(data);\n// filterStorage.getValue();\n// filterStorage.removeItem();\n\n// how to use ShopStorage=========================================================================\n// check your from path!\n// import{ShopStorage} from './local-storage-api'\n\n// const SHOP_STORAGE = 'shop-storage';\n\n// инициализация;\n// const shopStorage = new ShopStorage(SHOP_STORAGE);\n\n// добавляем продукт\n// shopStorage.setProduct(productObj);\n\n// считываем все продукты\n// const shopStorageProducts = shopStorage.getAllProducts();\n\n// уделяем отдельный продукт все продукты\n// shopStorage.removeProduct('640c2dd963a319ea671e37ad');\n\n// удаляем все продукты\n//shopStorage.removeAllProducts();\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://food-boutique.b.goit.study/api';\n\nexport class FoodBoutiqueAPI {\n  constructor() {}\n\n  // Отримати категорії продуктів\n  async getProductCategories() {\n    const { data } = await axios('/products/categories');\n    return data;\n  }\n  async getProducts(requestParams) {\n    // використовуємо axios params\n    const { data } = await axios(`/products`, {\n      params: {\n        ...requestParams,\n      },\n    });\n    return data;\n  }\n\n  // Отримати деталі продукту\n  async getProductDetails(productId) {\n    const { data } = await axios(`/products/${productId}`);\n    return data;\n  }\n\n  // Отримати популярні продукти\n  async getPopularProducts() {\n    const { data } = await axios('/products/popular');\n    return data;\n  }\n\n  // Отримати продукти зі знижкою\n  async getDiscountedProducts() {\n    const { data } = await axios('/products/discount');\n    return data;\n  }\n\n  // Підписатися на розсилку новин\n  async subscribeToNewsletter(userData) {\n    const data = await axios.post('/subscription', userData, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    return data;\n  }\n\n  // Зробити замовлення продуктів\n  async placeOrder(orderData) {\n    const { data } = await axios.post('/orders', orderData, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    return data;\n  }\n}\n","import { FoodBoutiqueAPI } from './food-api.js';\nimport Swal from 'sweetalert2';\n\nconst foodApi = new FoodBoutiqueAPI();\n\nconst form = document.querySelector('form[name=\"email_address\"]');\n\nform.addEventListener('submit', async function (event) {\n  event.preventDefault();\n\n  const emailInput = event.currentTarget.elements['footer-input-email'];\n  const emailValue = emailInput.value;\n\n  try {\n    const response = await foodApi.subscribeToNewsletter({ email: emailValue });\n    emailInput.value = '';\n    \n    let successMessage = 'Successfully subscribed!';\n    if (response && response.data && response.data.message) {\n      successMessage = response.data.message;\n    }\n\n    Swal.fire({\n      icon: 'success',\n      title: successMessage,\n      showConfirmButton: true,\n      confirmButtonColor: '#6D8434',\n      showCancelButton: false,\n      customClass: {\n        popup: 'small-popup',\n        title: 'custom-title',\n        icon: 'custom-icon',\n      },\n    });\n  } catch (error) {\n    console.error('Error:', error);\n    error;\n\n    let errorMessage = 'There was an error subscribing. Please try again.';\n\n    if (error.response && error.response.data && error.response.data.message) {\n      errorMessage = error.response.data.message;\n    }\n\n    Swal.fire({\n      icon: 'error',\n      title: 'Error',\n      text: errorMessage,\n      showConfirmButton: true,\n      confirmButtonColor: '#6D8434',\n      showCancelButton: false,\n      customClass: {\n        popup: 'small-popup',\n        title: 'custom-title',\n        icon: 'custom-icon',\n      },\n    });\n  }\n});\n"],"names":["Storage","storageName","data","ShopStorage","__publicField","obj","item","dataArr","productId","axios","FoodBoutiqueAPI","requestParams","userData","orderData","foodApi","form","event","emailInput","emailValue","response","successMessage","Swal","error","errorMessage"],"mappings":"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"}