{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart/cartHandler.js","../src/js/cart/markup-cart-product.js","../src/js/cart/cart-products.js","../src/js/cart/cart-order.js"],"sourcesContent":["import { ShopStorage } from '../local-storage-api';\n\nconst SHOP_STORAGE = 'shop-storage';\nconst shopStorage = new ShopStorage(SHOP_STORAGE);\n\n// const product1 = {\n//   _id: '640c2dd963a319ea671e383b',\n//   name: 'Ackee',\n//   desc: 'A fruit that is native to West Africa, but is also grown in the Caribbean, and is often used in traditional Jamaican dishes such as ackee and saltfish.',\n//   img: 'https://ftp.goit.study/img/so-yummy/ingredients/640c2dd963a319ea671e383b.png',\n//   category: 'Fresh_Produce',\n//   price: 8.99,\n//   size: '16 oz',\n//   is10PercentOff: false,\n//   popularity: 2,\n// };\n// const product2 = {\n//   _id: '640c2dd963a319ea671e3864',\n//   name: 'Black Beans',\n//   img: 'https://ftp.goit.study/img/so-yummy/ingredients/640c2dd963a319ea671e3864.png',\n//   category: 'Pantry_Items',\n//   price: 1.99,\n//   size: '16oz',\n//   is10PercentOff: false,\n//   popularity: 0,\n// };\n// const product3 = {\n//   _id: '640c2dd963a319ea671e37ad',\n//   name: 'Black Olives',\n//   img: 'https://ftp.goit.study/img/so-yummy/ingredients/640c2dd963a319ea671e37ad.png',\n//   category: 'Fresh_Produce',\n//   price: 3.99,\n//   size: '1 jar (16 oz)',\n//   is10PercentOff: false,\n//   popularity: 0,\n// };\n\n// console.log(shopStorage.getAllProducts());\n// // shopStorage.setProduct();\n// shopStorage.setProduct(product1);\n// shopStorage.setProduct(product2);\n// shopStorage.setProduct(product3);\n// console.log(shopStorage.getAllProducts());\n// shopStorage.removeProduct('640c2dd963a319ea671e37ad');\n// console.log(shopStorage.getAllProducts());\n// shopStorage.removeAllProducts();\n// console.log(shopStorage.getAllProducts());","const localStorageCartProduct = [\n  {\n    _id: '640c2dd963a319ea671e383b',\n    name: 'Ackee',\n    img: 'https://ftp.goit.study/img/so-yummy/ingredients/640c2dd963a319ea671e383b.png',\n    category: 'Fresh_Produce',\n    price: 8.99,\n    size: '16 oz',\n    is10PercentOff: false,\n    popularity: 8,\n  },\n  {\n    _id: '640c2dd963a319ea671e3860',\n    name: 'Allspice',\n    img: 'https://ftp.goit.study/img/so-yummy/ingredients/640c2dd963a319ea671e3860.png',\n    category: 'Pantry_Items',\n    price: 2.99,\n    size: '1.5oz',\n    is10PercentOff: false,\n    popularity: 8,\n  },\n  {\n    _id: '640c2dd963a319ea671e3660',\n    name: 'Apple Cider Vinegar',\n    img: 'https://ftp.goit.study/img/so-yummy/ingredients/640c2dd963a319ea671e3660.png',\n    price: 6.99,\n    size: '500 ml',\n    category: 'Pantry_Items',\n    is10PercentOff: false,\n    popularity: 0,\n  },\n  {\n    _id: '640c2dd963a319ea671e3861',\n    name: 'Almond Extract',\n    img: 'https://ftp.goit.study/img/so-yummy/ingredients/640c2dd963a319ea671e3861.png',\n    category: 'Pantry_Items',\n    price: 4.99,\n    size: '2oz',\n    is10PercentOff: false,\n    popularity: 0,\n  },\n];\n\nexport function markupCartProduct(arr) {\n  return arr\n    .map(({ category, img, name, price, size, _id }) => {\n      return `<li class=\"cart-item\" data-id=\"${_id}\">\n      <img class=\"cart-img-product\" src=\"${img}\" alt=\"${name}\" />\n      <div class=\"cart-product-description\">\n          <p class=\"cart-product-name\">${name}</p>\n          <p class=\"cart-product-text\">Category: <span class=\"cart-text-black gap\">${category}</span>  Size: <span class=\"cart-text-black\">${size}</span></p>\n          <p class=\"cart-product-price\">$${price}</p>\n      </div>\n      <button type=\"button\" class=\"cart-product-close-btn\">\n          <svg class=\"cart-icon-close\">\n              <use href=\"./icons.svg#icon-close\"></use>\n          </svg>\n      </button>\n  </li>`;\n    })\n    .join('');\n}\n\n// const cartList = document.querySelector('.cart-list');\n// cartList.innerHTML = markupCartProduct(localStorageCartProduct);\n\n// console.log(localStorageCartProduct.length > 3);\n// function addScrollProductInCart(localStorageCartProduct) {\n//   if (localStorageCartProduct.length > 3) {\n//     cartList.style.oveflow = 'overlay';\n//   }\n//   return;\n// }\n// addScrollProductInCart(localStorageCartProduct);\n","import { markupCartProduct } from './markup-cart-product';\nimport { ShopStorage } from '../local-storage-api';\n\nlet arrCarts = [];\nconst navSpanForCartRef = document.querySelector('.number-of-product');\nconst headerNavSpanRef = document.querySelector('.nav-span');\nconst totalAmountRef = document.querySelector('.total-amount');\nconst cardListOrder = document.querySelector('.cart-list');\nconst shopStorage = new ShopStorage('shop-storage');\n\ncardListOrder.addEventListener('click', onRemoveOrderFromCartClick);\n\nconst deleteAllBtn = document.querySelector('.js-delete-all-btn');\ndeleteAllBtn.addEventListener('click', () => {\n  cardListOrder.innerHTML = '';\n  shopStorage.removeAllProducts();\n  changeNumberInCart(0);\n  updateTotalPrice(0); // Оновлюємо загальну вартість після видалення всіх товарів\n});\n\nfunction checkedShopStorage() {\n  const getLocalCart = shopStorage.getAllProducts() ?? [];\n  arrCarts = getLocalCart;\n  cardListOrder.innerHTML = markupCartProduct(arrCarts);\n  changeNumberInCart(arrCarts.length);\n  updateTotalPrice(arrCarts.reduce((acc, item) => acc + item.price, 0)); // Оновлюємо загальну вартість при завантаженні сторінки\n}\n\ncheckedShopStorage();\n\nexport function changeNumberInCart(number) {\n  navSpanForCartRef.textContent = number;\n  headerNavSpanRef.textContent = number;\n}\n\nexport function updateTotalPrice(total) {\n  totalAmountRef.textContent = total.toFixed(2); // Оновлюємо загальну вартість\n}\n\nfunction onRemoveOrderFromCartClick(e) {\n  if (!e.target.closest('.cart-product-close-btn')) return;\n  const objFromLi = e.target.closest('li');\n  const dataIdItem = objFromLi.dataset.id;\n  const findElementFromShopStorage = shopStorage.getAllProducts().filter(\n    item => item._id !== dataIdItem\n  );\n  shopStorage.setAllProduct(findElementFromShopStorage);\n  checkedShopStorage();\n  updateTotalPrice(findElementFromShopStorage.reduce((acc, item) => acc + item.price, 0)); // Оновлюємо загальну вартість при видаленні товарів\n}\n","// *---------Відкриття повідомлення через MODAL----------*\n\n// import { ShopStorage } from '../local-storage-api';\n// import { FoodBoutiqueAPI } from '../food-api';\n// import Swal from 'sweetalert2';\n// import { openSuccessModal } from '../modal-success';\n// import {updateTotalPrice} from '../cart/cart-products'\n\n// const shopStorage = new ShopStorage('shop-storage');\n// const foodAPI = new FoodBoutiqueAPI();\n\n// const orderForm = document.getElementById('subscription-form');\n// const cardListOrder = document.querySelector('.cart-list');\n// const emailInput = document.getElementById('email');\n\n// orderForm.addEventListener('submit', async (event) => {\n//   event.preventDefault();\n\n//   const cartItems = shopStorage.getAllProducts();\n//   const email = document.getElementById('email').value;\n\n//   if (cartItems && cartItems.length > 0) {\n//     const orderData = {\n//       email: email,\n//       products: cartItems.map(item => ({ productId: item._id, amount: 1 }))\n//     };\n\n//     try {\n//       const response = await foodAPI.placeOrder(orderData);\n\n//       if (response && response.message) {\n//         shopStorage.removeAllProducts();\n//         await openSuccessModal();\n          \n//         // Очистити корзину на інтерфейсі після успішного замовлення\n//         cardListOrder.innerHTML = '';\n//         emailInput.value = ''; // Очищення поля вводу електронної пошти\n//           updateTotalPrice(0);\n//       }\n\n//     } catch (error) {\n//       console.error('Помилка при оформленні замовлення:', error);\n//     }\n//   } else {\n//     Swal.fire({\n//       icon: 'error',\n//       title: 'Error',\n//       text: 'The cart is empty. Please add products to the cart!',\n//       showConfirmButton: true,\n//       confirmButtonColor: '#6D8434',\n//       showCancelButton: false,\n//       customClass: {\n//         popup: 'small-popup',\n//         title: 'custom-title',\n//         icon: 'custom-icon',\n//       },\n//     });\n//   }\n// });\n\n\n// *---------Відкриття повідомлення через SweetAlert2----------*\n\nimport { ShopStorage } from \"../local-storage-api\";\nimport { FoodBoutiqueAPI } from '../food-api';\nimport Swal from 'sweetalert2';\nimport {updateTotalPrice} from '../cart/cart-products'\nimport { changeNumberInCart } from '../cart/cart-products'\n\n\nconst shopStorage = new ShopStorage('shop-storage');\nconst foodAPI = new FoodBoutiqueAPI();\n\nconst orderForm = document.getElementById('subscription-form');\nconst cardListOrder = document.querySelector('.cart-list');\nconst emailInput = document.getElementById('email');\n\norderForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const cartItems = shopStorage.getAllProducts();\n  const email = document.getElementById('email').value;\n\n  if (cartItems && cartItems.length > 0) {\n    const orderData = {\n      email: email,\n      products: cartItems.map(item => ({ productId: item._id, amount: 1 }))\n    };\n\n    try {\n      const response = await foodAPI.placeOrder(orderData);\n\n      if (response && response.message) {\n          shopStorage.removeAllProducts();\n          // Очистити корзину на інтерфейсі після успішного замовлення\n          shopStorage.removeAllProducts();\n          changeNumberInCart(0);\n          cardListOrder.innerHTML = '';\n          emailInput.value = ''; // Очищення поля вводу електронної пошти\n          updateTotalPrice(0);\n\n        // Додати повідомлення про успішне замовлення\n        Swal.fire({\n          icon: 'success',\n          title: 'ORDER SUCCESS',\n          text: response.message,\n          showConfirmButton: true,\n          confirmButtonColor: '#6D8434',\n          showCancelButton: false,\n          customClass: {\n            popup: 'small-popup',\n            title: 'custom-title',\n            icon: 'custom-icon',\n          },\n        });\n      }\n\n    } catch (error) {\n      console.error('Помилка при оформленні замовлення:', error);\n    }\n  } else {\n    Swal.fire({\n      icon: 'error',\n      title: 'Error',\n      text: 'The cart is empty. Please add products to the cart!',\n      showConfirmButton: true,\n      confirmButtonColor: '#6D8434',\n      showCancelButton: false,\n      customClass: {\n        popup: 'small-popup',\n        title: 'custom-title',\n        icon: 'custom-icon',\n      },\n    });\n  }\n});\n\n\n\n"],"names":["SHOP_STORAGE","ShopStorage","markupCartProduct","arr","category","img","name","price","size","_id","arrCarts","navSpanForCartRef","headerNavSpanRef","totalAmountRef","cardListOrder","shopStorage","onRemoveOrderFromCartClick","deleteAllBtn","changeNumberInCart","updateTotalPrice","checkedShopStorage","acc","item","number","total","dataIdItem","findElementFromShopStorage","foodAPI","FoodBoutiqueAPI","orderForm","emailInput","event","cartItems","email","orderData","response","Swal","error"],"mappings":"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"}